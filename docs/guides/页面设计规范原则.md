# SuperInbox 页面设计规范原则（Dashboard）

> 版本：v1.0（初稿）  
> 维护范围：Web Dashboard 页面  
> 参考页面：收件箱（Inbox）、分类设置（Category）、分发规则（Routing）

## 1. 背景与目标

我们在持续迭代中发现：新页面视觉风格和交互习惯存在漂移，导致体验不一致、维护成本升高。  
本规范用于统一后续页面的设计与实现标准，避免“每页一个风格”。

本规范的目标：

1. 保持页面骨架一致（布局、间距、信息层级）。
2. 保持组件行为一致（按钮、卡片、状态、弹窗、列表）。
3. 保持视觉语言一致（色彩、圆角、阴影、字重、密度）。
4. 新页面开发默认遵循本规范，除非有明确业务例外。

---

## 2. 适用范围

适用于 `web/src/app/[locale]/(dashboard)` 下所有新增页面，以及对现有页面的大改。

不适用：

- 登录/注册等 Auth 页面（可有独立品牌表达）。
- 需要强任务沉浸感的特殊页（需在评审时说明偏离原因）。

---

## 3. 从参考页面抽取的统一原则

### 3.1 页面骨架统一

默认采用以下骨架：

- 外层容器：`w-full space-y-6 px-4 md:px-6 py-6`
- 页头区：左侧描述（或标题说明）+ 右侧主操作按钮
- 主内容区：`Card` 包裹，内部再放筛选、列表/卡片、统计
- 列表与卡片支持双视图时：桌面可切换，移动端优先卡片（grid）

说明：分类设置与分发规则已使用该骨架，可作为新页面模板。

### 3.2 设计 token 优先

优先使用语义 token（`bg-background`、`text-muted-foreground`、`border-border` 等），避免无理由硬编码颜色值。

分类色彩必须复用：

- `resolveCategoryColor`
- `resolveCategoryIconName`
- `getCategorySoftStyle`
- `getCategoryBadgeStyle`

避免每个页面自定义一套分类色和图标映射。

### 3.3 信息层级一致

建议层级：

- 一级信息：`text-base` / `text-lg` + `font-medium` 或 `font-semibold`
- 二级说明：`text-sm text-muted-foreground`
- 辅助元信息：`text-xs text-muted-foreground`

注意：小字号全大写（uppercase + font-black）仅用于少量标签/辅助信息，不应成为页面主文本基调。

### 3.4 控件一致性

- 操作按钮优先复用 `Button` 标准 variants（`default/outline/ghost`）。
- 布尔状态优先使用 `Switch`（列表状态开关统一）。
- 多选项筛选优先使用 `Select` 或可复用的 pills 组件，不重复造轮子。
- 删除操作统一放在次级菜单（`DropdownMenu`）并使用 destructive 语义色。

### 3.5 状态反馈统一

每个页面都应覆盖四类状态：

1. 加载态（loading）
2. 空态（empty）
3. 错误态（toast + 文案）
4. 成功态（toast）

文案统一走 i18n，不写死业务文本。

### 3.6 响应式与触达

- 桌面与移动端都可完成核心任务。
- 移动端最小触达尺寸维持 44px（项目已有全局保障）。
- 桌面复杂结构可用 list/grid 切换；移动端优先可扫读的 grid。

### 3.7 动效克制且有意义

- 页面级动效用于状态切换/反馈，不做装饰性泛滥动画。
- 同类交互保持同类动效节奏（进入、悬停、加载）。
- 动效必须可退化，不影响功能可用性。

---

## 4. 可执行规范（新页面默认）

### 4.1 布局模板

新页面优先按以下顺序组织：

1. 说明区（页面目的 + 关键说明）
2. 主操作区（新增、导入、批量操作等）
3. 筛选/搜索区
4. 结果区（list 或 grid）
5. 统计摘要（可选）

### 4.2 列表与卡片

- 同一业务实体在 list 与 grid 的信息字段应保持等价（仅排版变化）。
- grid 卡片圆角、边框、阴影尽量统一到同一视觉等级。
- 列表项操作位统一在右侧；主信息在左侧，避免反复换位。

### 4.3 弹窗（Dialog）

宽度建议：

- 小型编辑：`max-w-xl`
- 常规复杂表单：`max-w-3xl`
- 多区域选择器：`max-w-5xl`

并保持：

- 顶部标题+说明
- 中部滚动内容
- 底部固定动作区（取消/确认）

### 4.4 颜色与视觉密度

- 优先浅灰背景 + 白卡片 + 低对比边框（现有主风格）。
- 强强调色仅用于关键状态（danger/warning/success）与分类语义。
- 不引入新品牌主色，除非通过设计评审。
- 边框 token 使用规则：`--border` / `--input` 已内置透明度，禁止再写 `border-border/70`、`border-input/60` 这类二次透明度语法。
- 推荐写法：`border border-border`、`border border-input`；禁用写法：`border-border/70`、`border-input/50`。

### 4.5 文案与语气

- 操作文案优先动词开头（例如“新增分类”“创建规则”）。
- 空状态文案应可行动（告诉用户下一步做什么）。
- 错误提示优先给出可恢复路径（重试、检查配置、稍后再试）。

---

## 5. 当前发现的不统一点（待确认后沉淀）

以下是从 Inbox / Category / Routing 抽样发现的差异：

| # | 不统一点 | 当前表现 | 建议统一方向 | 状态 |
|---|---|---|---|---|
| 1 | 页面底色策略 | 已将 `--background` 对齐 Inbox 色值，Inbox 页面基底已切换为 token；局部特效色按需保留 | Dashboard 页面优先 token，硬编码仅用于局部特效 | 已确认（已落地） |
| 2 | 字体气质 | Inbox 历史上存在较多 `uppercase + font-black`；Category/Routing 偏常规阅读体 | 主信息统一常规字重，重装饰字重只保留局部标签 | 已确认（已落地） |
| 3 | 卡片视觉等级 | Inbox 卡片、Category/Routing grid 卡片圆角与阴影体系已统一到同一基础卡等级 | 统一卡片等级（基础卡/强调卡）并复用 class 组合 | 已确认（已落地） |
| 4 | 筛选控件样式 | Inbox 与 Routing 的筛选容器已抽离共享 FilterBar，pills 使用统一样式组件 | 抽离统一 FilterBar（含 pills/select/search） | 已确认（第一阶段落地） |

备注：以上不统一项不是“立即改造任务”，而是规范收敛清单。确认后再按优先级逐步治理。

### 5.1 第 1 条确认明细（页面底色策略）

当前 token 基准（来自全局变量）：

- 浅色背景：`--background: 240 11% 96.5%`（对齐 `#f5f5f7`）
- 深色背景：`--background: 240 15% 5.1%`（对齐 `#0b0b0f`）

Inbox 页面基底已切换到 token（示例）：

- 页面根容器：`bg-background`
- 顶部区域：`bg-card/70 dark:bg-background/50`
- 结果区域：`bg-muted/20 dark:bg-background/40`

结论：

- 页面基底色已统一到 token，并与 Inbox 视觉基准保持一致。
- Category/Routing 与 Inbox 的页面级背景语义已对齐（都应走 `bg-background` 体系）。
- 统一原则保持不变：页面基底使用 token（`bg-background`/`bg-background/*`），硬编码仅保留在局部视觉特效层（如拖拽遮罩、调试状态块等）。

### 5.2 第 2 条确认明细（字体气质）

统一后的字体规则：

- 主信息（标题、筛选项、主操作文案）优先 `font-medium` / `font-semibold`。
- 默认不使用 `uppercase + font-black` 作为主信息样式。
- `uppercase` 可用于局部辅助标签（如极小尺寸状态标记），但需低频使用。
- 字距（tracking）保持轻量，避免 `tracking-widest` 这类强装饰风格作为默认。

落地状态：

- Inbox 核心高频区域（筛选区、Capture 按钮、卡片时间元信息）已完成第一轮收敛。
- 后续新增页面默认遵循该规则，历史页面按迭代节奏继续收敛。

### 5.3 第 3 条确认明细（卡片视觉等级）

统一后的基础卡样式（按 Inbox 卡片体系）：

- 圆角：`rounded-2xl`
- 边框：`border border-border`
- 背景：`bg-card`（暗色补充 `dark:bg-background/70`）
- 阴影：`shadow-sm`，悬停 `hover:shadow-md`

落地状态：

- Category grid 卡片已对齐上述基础卡样式。
- Routing grid 卡片已对齐上述基础卡样式（系统规则保留 ring 强调）。

### 5.4 第 4 条确认明细（筛选控件抽离）

统一后的抽离策略：

- 筛选栏容器统一使用共享组件：`DashboardFilterBar`
- pills 按钮统一使用共享组件：`FilterPillButton`
- 搜索输入、Select 控件继续复用现有 UI 组件（`Input` / `Select`）

落地状态（第一阶段）：

- Inbox 页面已接入 `DashboardFilterBar` 与 `FilterPillButton`。
- Routing 页面已接入 `DashboardFilterBar`（容器布局统一）。
- 后续页面新增筛选栏时，默认优先复用该共享组件。

---

## 6. 新页面开发准入清单（必须遵循）

在提交 PR 前，新增页面必须满足：

- [ ] 页面骨架采用本规范 4.1 模板或说明偏离原因。
- [ ] 颜色/边框/阴影优先 token，不新增无依据硬编码色。
- [ ] 不使用 `border-border/xx`、`border-input/xx` 这类二次透明度写法。
- [ ] 主信息不使用 `uppercase + font-black` 作为默认样式（局部标签除外）。
- [ ] 具备 loading / empty / success / error 四类状态。
- [ ] 交互控件复用现有 UI 组件（Button、Card、Dialog、Select、Switch 等）。
- [ ] 筛选栏优先复用共享 FilterBar 组件（`DashboardFilterBar` / `FilterPillButton`）。
- [ ] 移动端可用（关键操作可触达，布局不破）。
- [ ] 文案走 i18n，不写死。
- [ ] 若引入新视觉范式，已在本规范追加说明。

---

## 7. 变更流程（规范如何持续更新）

当发现新差异时，按以下流程：

1. 在评审中记录“差异点 + 场景 + 截图/代码位置”。
2. 判断是“业务例外”还是“应升级为新规范”。
3. 若升级为规范：更新本文档 + 给出迁移建议。
4. 后续新页面按更新后的规范执行。

建议：每两周做一次轻量回顾，集中处理新增的风格分叉。

---

## 8. 参考实现入口

- `/Users/page/project/superinbox/web/src/app/[locale]/(dashboard)/inbox/page.tsx`
- `/Users/page/project/superinbox/web/src/app/[locale]/(dashboard)/category/page.tsx`
- `/Users/page/project/superinbox/web/src/app/[locale]/(dashboard)/routing/page.tsx`
- `/Users/page/project/superinbox/web/src/app/[locale]/(dashboard)/layout.tsx`
- `/Users/page/project/superinbox/web/src/app/globals.css`
- `/Users/page/project/superinbox/web/src/components/shared/filter-bar.tsx`
